{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/agarw/OneDrive/Desktop/Timetable%20management/src/ai/genkit.ts"],"sourcesContent":["import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/googleai';\n\n// Set the API key directly - using the actual API key\nconst apiKey = 'AIzaSyBGtN6YQ_2xw_Itn85Vcqp9uB1rxa1e9Xk';\n\n// Also set it as an environment variable for Genkit\nprocess.env.GEMINI_API_KEY = apiKey;\nprocess.env.GOOGLE_API_KEY = apiKey;\nprocess.env.GOOGLE_GENAI_API_KEY = apiKey;\n\nconsole.log('API Key configured:', apiKey ? 'Yes' : 'No');\n\nexport const ai = genkit({\n  plugins: [googleAI({\n    apiKey: apiKey,\n  })],\n  model: 'googleai/gemini-2.0-flash', // Updated to match your curl command\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEA,sDAAsD;AACtD,MAAM,SAAS;AAEf,oDAAoD;AACpD,QAAQ,GAAG,CAAC,cAAc,GAAG;AAC7B,QAAQ,GAAG,CAAC,cAAc,GAAG;AAC7B,QAAQ,GAAG,CAAC,oBAAoB,GAAG;AAEnC,QAAQ,GAAG,CAAC,uBAAuB,uCAAS;AAErC,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,SAAM,AAAD,EAAE;IACvB,SAAS;QAAC,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD,EAAE;YACjB,QAAQ;QACV;KAAG;IACH,OAAO;AACT","debugId":null}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/agarw/OneDrive/Desktop/Timetable%20management/src/ai/flows/generate-optimized-timetables.ts"],"sourcesContent":["'use server';\n/**\n * @fileOverview This file defines a Genkit flow for generating optimized timetables using AI.\n *\n * The flow takes department and semester IDs as input, along with constraints, and returns\n * multiple optimized timetables.  It is exposed via the generateOptimizedTimetables function.\n *\n * - generateOptimizedTimetables - A function that handles the timetable generation process.\n * - GenerateOptimizedTimetablesInput - The input type for the generateOptimizedTimetables function.\n * - GenerateOptimizedTimetablesOutput - The return type for the generateOptimizedTimetables function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst GenerateOptimizedTimetablesInputSchema = z.object({\n  departmentId: z.string().describe('The ID of the department for which to generate the timetable.'),\n  semesterId: z.string().describe('The ID of the semester for which to generate the timetable.'),\n  subjectIds: z.array(z.string()).describe('Array of subject IDs to include in the timetable generation.'),\n  constraints: z\n    .object({\n      classrooms: z.array(z.string()).describe('List of classroom IDs to consider.'),\n      facultyLoad: z.record(z.string(), z.number()).describe('Mapping of faculty ID to their maximum teaching load (hours).'),\n      subjectWeeklyHours: z.record(z.string(), z.number()).describe('Mapping of subject ID to the number of weekly hours required.'),\n      leaves: z.record(z.string(), z.array(z.string())).describe('Mapping of faculty ID to a list of dates they are on leave (YYYY-MM-DD).'),\n      fixedSlots: z\n        .array(\n          z.object({\n            day: z.string().describe('Day of the week (e.g., Monday, Tuesday).'),\n            slot: z.number().describe('Time slot number (1-6).'),\n            classroomId: z.string().describe('The ID of the classroom for this slot.'),\n            subjectId: z.string().describe('The ID of the subject taught in this slot.'),\n            facultyId: z.string().describe('The ID of the faculty teaching this subject.'),\n          })\n        )\n        .describe('List of pre-defined time slots that must be included in the timetable.'),\n    })\n    .describe('Constraints to consider while generating the timetable.'),\n});\nexport type GenerateOptimizedTimetablesInput = z.infer<typeof GenerateOptimizedTimetablesInputSchema>;\n\nconst GenerateOptimizedTimetablesOutputSchema = z.array(z.object({\n  timetableId: z.string().describe('Unique identifier for the generated timetable.'),\n  score: z.number().describe('The optimization score of this timetable (0-100, higher is better).'),\n  conflicts: z.array(z.string()).describe('List of any conflicts detected in this timetable.'),\n  summary: z.object({\n    classroomUtilization: z.number().describe('Classroom utilization percentage (0-100).'),\n    facultyLoadBalance: z.number().describe('Faculty load balance score (0-100, higher is better).'),\n    studentConflictCount: z.number().describe('Number of student scheduling conflicts (should be 0 if optimal).'),\n  }).describe('Summary metrics for timetable optimization.'),\n  schedule: z.array(\n    z.object({\n      day: z.string().describe('Day of the week (e.g., Monday, Tuesday).'),\n      slot: z.number().describe('Time slot number (1-8).'),\n      classroomId: z.string().describe('The ID of the classroom for this slot.'),\n      subjectId: z.string().describe('The ID of the subject taught in this slot.'),\n      facultyId: z.string().describe('The ID of the faculty teaching this subject.'),\n      batch: z.string().describe('The batch/section assigned to this slot.'),\n    })\n  ).describe('The generated timetable schedule.')\n}));\nexport type GenerateOptimizedTimetablesOutput = z.infer<typeof GenerateOptimizedTimetablesOutputSchema>;\n\nexport async function generateOptimizedTimetables(input: GenerateOptimizedTimetablesInput): Promise<GenerateOptimizedTimetablesOutput> {\n  return generateOptimizedTimetablesFlow(input);\n}\n\nconst generateTimetablePrompt = ai.definePrompt({\n  name: 'generateTimetablePrompt',\n  input: {schema: GenerateOptimizedTimetablesInputSchema},\n  output: {schema: GenerateOptimizedTimetablesOutputSchema},\n  prompt: `You are an expert timetable scheduler for higher education institutes. \nGenerate an optimized **class timetable** based on the following details.\n\n### Input Data\n- Department: {{departmentId}}\n- Semester: {{semesterId}}\n- Subjects: {{subjectIds}} (only schedule these subjects - use the actual subject names like \"Database Management System\", \"C++ & DSA\", \"Python\", \"DECO\", \"Aptitude\")\n- Constraints: {{constraints}}\n\n### Constraints\n1. Maximize classroom and lab utilization.\n2. Avoid timetable clashes for students and faculty.\n3. Distribute faculty workload evenly (respect max classes per day).\n4. Respect weekly lecture counts for each subject.\n5. Consider average leaves of faculty.\n6. Do not move fixed-slot classes.\n7. Only schedule the subjects provided by the user.\n\n### Output Requirements\nGenerate 2-3 optimized timetables with days (Mondayâ€“Saturday) and 6 slots per day.\nEach slot must include: subject (use actual subject names like \"Database Management System\", \"C++ & DSA\", \"Python\", \"DECO\", \"Aptitude\"), faculty, room, batch.\n**IMPORTANT**: \n- Use the actual subject names in the subjectId field, not generic IDs\n- Schedule subjects in ALL 6 lecture slots (slots 1-6)\n- For subjects with labs, schedule both theory and lab sessions\n- Use meaningful faculty names (F-101, F-102, etc.) and classroom names (CR-101, CR-102, Lab-1, etc.)\n\n### Optimization Scoring\n- Higher scores for better classroom utilization\n- Higher scores for balanced faculty workload\n- Deduct points for any scheduling conflicts\n- Bonus points for respecting all constraints\n\nReturn valid JSON with timetable ID, optimization score (0-100), conflicts list, and detailed schedule.`\n});\n\nconst generateOptimizedTimetablesFlow = ai.defineFlow(\n  {\n    name: 'generateOptimizedTimetablesFlow',\n    inputSchema: GenerateOptimizedTimetablesInputSchema,\n    outputSchema: GenerateOptimizedTimetablesOutputSchema,\n  },\n  async input => {\n    try {\n      // Check if subjectIds is empty\n      if (!input.subjectIds || input.subjectIds.length === 0) {\n        throw new Error('Please select at least one subject');\n      }\n\n      const {output} = await generateTimetablePrompt(input);\n      return output!;\n    } catch (error) {\n      console.error('Timetable generation error:', error);\n      \n      // If no subjects selected, return error\n      if ((error as Error).message === 'Please select at least one subject') {\n        throw error;\n      }\n      \n      // Return mock data when AI is unavailable, using selected subjects\n      const mockSchedule = [];\n      const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\n      \n      // Fill all 6 lecture slots with subjects\n      for (let dayIndex = 0; dayIndex < days.length; dayIndex++) {\n        for (let slot = 1; slot <= 6; slot++) {\n          const subjectIndex = (dayIndex * 6 + slot - 1) % input.subjectIds.length;\n          mockSchedule.push({\n            day: days[dayIndex],\n            slot: slot,\n            classroomId: `CR${101 + (slot % 3)}`,\n            subjectId: input.subjectIds[subjectIndex],\n            facultyId: `F00${(subjectIndex % 5) + 1}`,\n            batch: `CSE-3A`\n          });\n        }\n      }\n\n      return [\n        {\n          timetableId: 'mock-' + Date.now(),\n          score: 85,\n          conflicts: [],\n          summary: {\n            classroomUtilization: 75,\n            facultyLoadBalance: 80,\n            studentConflictCount: 0\n          },\n          schedule: mockSchedule\n        }\n      ];\n    }\n  }\n);\n"],"names":[],"mappings":";;;;;AACA;;;;;;;;;CASC,GAED;AACA;AAAA;;;;;;AAEA,MAAM,yCAAyC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACtD,cAAc,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAClC,YAAY,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAChC,YAAY,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;IACzC,aAAa,uIAAA,CAAA,IAAC,CACX,MAAM,CAAC;QACN,YAAY,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;QACzC,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;QACvD,oBAAoB,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;QAC9D,QAAQ,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,KAAK,QAAQ,CAAC;QAC3D,YAAY,uIAAA,CAAA,IAAC,CACV,KAAK,CACJ,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YACP,KAAK,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;YACzB,MAAM,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;YAC1B,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;YACjC,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;YAC/B,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QACjC,IAED,QAAQ,CAAC;IACd,GACC,QAAQ,CAAC;AACd;AAGA,MAAM,0CAA0C,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC/D,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACjC,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC3B,WAAW,uIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;IACxC,SAAS,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QAChB,sBAAsB,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC1C,oBAAoB,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QACxC,sBAAsB,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC5C,GAAG,QAAQ,CAAC;IACZ,UAAU,uIAAA,CAAA,IAAC,CAAC,KAAK,CACf,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,KAAK,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QACzB,MAAM,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC1B,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QACjC,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC/B,WAAW,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC/B,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC7B,IACA,QAAQ,CAAC;AACb;AAGO,eAAe,4BAA4B,KAAuC;IACvF,OAAO,gCAAgC;AACzC;AAEA,MAAM,0BAA0B,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAC9C,MAAM;IACN,OAAO;QAAC,QAAQ;IAAsC;IACtD,QAAQ;QAAC,QAAQ;IAAuC;IACxD,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uGAiC4F,CAAC;AACxG;AAEA,MAAM,kCAAkC,mHAAA,CAAA,KAAE,CAAC,UAAU,CACnD;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAM;IACJ,IAAI;QACF,+BAA+B;QAC/B,IAAI,CAAC,MAAM,UAAU,IAAI,MAAM,UAAU,CAAC,MAAM,KAAK,GAAG;YACtD,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,wBAAwB;QAC/C,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAE7C,wCAAwC;QACxC,IAAI,AAAC,MAAgB,OAAO,KAAK,sCAAsC;YACrE,MAAM;QACR;QAEA,mEAAmE;QACnE,MAAM,eAAe,EAAE;QACvB,MAAM,OAAO;YAAC;YAAU;YAAW;YAAa;YAAY;SAAS;QAErE,yCAAyC;QACzC,IAAK,IAAI,WAAW,GAAG,WAAW,KAAK,MAAM,EAAE,WAAY;YACzD,IAAK,IAAI,OAAO,GAAG,QAAQ,GAAG,OAAQ;gBACpC,MAAM,eAAe,CAAC,WAAW,IAAI,OAAO,CAAC,IAAI,MAAM,UAAU,CAAC,MAAM;gBACxE,aAAa,IAAI,CAAC;oBAChB,KAAK,IAAI,CAAC,SAAS;oBACnB,MAAM;oBACN,aAAa,CAAC,EAAE,EAAE,MAAO,OAAO,GAAI;oBACpC,WAAW,MAAM,UAAU,CAAC,aAAa;oBACzC,WAAW,CAAC,GAAG,EAAE,AAAC,eAAe,IAAK,GAAG;oBACzC,OAAO,CAAC,MAAM,CAAC;gBACjB;YACF;QACF;QAEA,OAAO;YACL;gBACE,aAAa,UAAU,KAAK,GAAG;gBAC/B,OAAO;gBACP,WAAW,EAAE;gBACb,SAAS;oBACP,sBAAsB;oBACtB,oBAAoB;oBACpB,sBAAsB;gBACxB;gBACA,UAAU;YACZ;SACD;IACH;AACF;;;IApGoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 424, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/agarw/OneDrive/Desktop/Timetable%20management/src/ai/simple-ai.ts"],"sourcesContent":["import { GoogleGenerativeAI } from '@google/generative-ai';\r\n\r\nconst API_KEY = 'AIzaSyBGtN6YQ_2xw_Itn85Vcqp9uB1rxa1e9Xk';\r\nconst genAI = new GoogleGenerativeAI(API_KEY);\r\n\r\nexport async function askAI(prompt: string): Promise<string> {\r\n  try {\r\n    const model = genAI.getGenerativeModel({ model: 'gemini-2.0-flash' });\r\n    const result = await model.generateContent(prompt);\r\n    const response = await result.response;\r\n    return response.text();\r\n  } catch (error) {\r\n    console.error('AI Error:', error);\r\n    return 'Sorry, I could not generate a response. Please try again.';\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,UAAU;AAChB,MAAM,QAAQ,IAAI,8JAAA,CAAA,qBAAkB,CAAC;AAE9B,eAAe,MAAM,MAAc;IACxC,IAAI;QACF,MAAM,QAAQ,MAAM,kBAAkB,CAAC;YAAE,OAAO;QAAmB;QACnE,MAAM,SAAS,MAAM,MAAM,eAAe,CAAC;QAC3C,MAAM,WAAW,MAAM,OAAO,QAAQ;QACtC,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,aAAa;QAC3B,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/agarw/OneDrive/Desktop/Timetable%20management/src/ai/flows/assistant-flow.ts"],"sourcesContent":["'use server';\n/**\n * @fileOverview A simple AI assistant flow.\n *\n * - chat - A function that handles the chat interaction.\n * - ChatInput - The input type for the chat function.\n * - ChatOutput - The return type for the chat function.\n */\n\nimport {z} from 'zod';\nimport { askAI } from '@/ai/simple-ai';\n\nconst ChatInputSchema = z.object({\n  prompt: z.string().describe('The user prompt.'),\n});\nexport type ChatInput = z.infer<typeof ChatInputSchema>;\n\nconst ChatOutputSchema = z.object({\n  response: z.string().describe(\"The AI's response.\"),\n});\nexport type ChatOutput = z.infer<typeof ChatOutputSchema>;\n\nexport async function chat(input: ChatInput): Promise<ChatOutput> {\n  try {\n    console.log('AI Assistant: Processing prompt:', input.prompt);\n    const response = await askAI(input.prompt);\n    console.log('AI Assistant: Response received:', response);\n    return { response };\n  } catch (error) {\n    console.error('AI Assistant error:', error);\n    return { response: 'AI Assistant is currently unavailable. Please try again.' };\n  }\n}\n"],"names":[],"mappings":";;;;;AACA;;;;;;CAMC,GAED;AACA;;;;;;AAEA,MAAM,kBAAkB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC/B,QAAQ,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC9B;AAGA,MAAM,mBAAmB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAChC,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;AAChC;AAGO,eAAe,KAAK,KAAgB;IACzC,IAAI;QACF,QAAQ,GAAG,CAAC,oCAAoC,MAAM,MAAM;QAC5D,MAAM,WAAW,MAAM,CAAA,GAAA,yHAAA,CAAA,QAAK,AAAD,EAAE,MAAM,MAAM;QACzC,QAAQ,GAAG,CAAC,oCAAoC;QAChD,OAAO;YAAE;QAAS;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO;YAAE,UAAU;QAA2D;IAChF;AACF;;;IAVsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 500, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/agarw/OneDrive/Desktop/Timetable%20management/src/app/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { generateOptimizedTimetables, type GenerateOptimizedTimetablesOutput } from '@/ai/flows/generate-optimized-timetables';\nimport { chat, type ChatOutput } from '@/ai/flows/assistant-flow';\n\nconst TimetableFormSchema = z.object({\n  departmentId: z.string().min(1, 'Department is required.'),\n  semesterId: z.string().min(1, 'Semester is required.'),\n  subjectIds: z.array(z.string()).min(1, 'At least one subject is required.'),\n});\n\nexport type TimetableState = {\n  message?: string | null;\n  errors?: {\n    departmentId?: string[];\n    semesterId?: string[];\n    subjectIds?: string[];\n    server?: string[];\n  };\n  result?: GenerateOptimizedTimetablesOutput;\n};\n\nexport async function createTimetable(prevState: TimetableState, formData: FormData): Promise<TimetableState> {\n  const subjectIdsString = formData.get('selectedSubjects') as string;\n  let subjectIds: string[] = [];\n  \n  try {\n    subjectIds = subjectIdsString ? JSON.parse(subjectIdsString) : [];\n  } catch (error) {\n    console.error('Error parsing selectedSubjects:', error);\n    subjectIds = [];\n  }\n\n  // If no subjects selected, use default subjects for the department/semester\n  const departmentId = formData.get('departmentId') as string;\n  const semesterId = formData.get('semesterId') as string;\n  \n  if (subjectIds.length === 0 && departmentId && semesterId) {\n    // Import the function to get default subjects\n    const { getSubjectsForDepartmentAndSemester } = await import('@/lib/data');\n    const defaultSubjects = getSubjectsForDepartmentAndSemester(departmentId, semesterId);\n    subjectIds = defaultSubjects.map(s => s.id);\n  }\n\n  const validatedFields = TimetableFormSchema.safeParse({\n    departmentId,\n    semesterId,\n    subjectIds: subjectIds,\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: 'Missing Fields. Failed to generate timetable.',\n    };\n  }\n  \n  const { departmentId: validDeptId, semesterId: validSemId, subjectIds: validatedSubjectIds } = validatedFields.data;\n\n  // Check if subjectIds is still empty after all attempts\n  if (validatedSubjectIds.length === 0) {\n    return {\n      message: 'No subjects available for the selected department and semester',\n      errors: { subjectIds: ['No subjects found for this combination'] }\n    };\n  }\n\n  try {\n    // This is where you'd fetch real constraints from Firestore\n    const mockConstraints = {\n        classrooms: ['CR101', 'CR102', 'CR201'],\n        facultyLoad: { 'F001': 10, 'F002': 12, 'F003': 8 },\n        subjectWeeklyHours: { 'S01': 4, 'S02': 3, 'S03': 4, 'S04': 3 },\n        leaves: { 'F002': ['2024-10-22'] },\n        fixedSlots: [],\n    };\n\n    const result = await generateOptimizedTimetables({\n      departmentId: validDeptId,\n      semesterId: validSemId,\n      subjectIds: validatedSubjectIds,\n      constraints: mockConstraints,\n    });\n\n    if (result && result.length > 0) {\n      return { message: 'Successfully generated timetables.', result: result };\n    } else {\n      return { message: 'AI failed to generate timetables.', errors: { server: ['No results returned.'] } };\n    }\n    \n  } catch (error) {\n    console.error('Error generating timetable:', error);\n    return { message: 'Database Error: Failed to generate timetable.', errors: { server: ['An unexpected error occurred.'] } };\n  }\n}\n\n\nconst AssistantFormSchema = z.object({\n  prompt: z.string().min(1, 'Prompt is required.'),\n});\n\nexport type AssistantState = {\n  message?: string | null;\n  errors?: {\n    prompt?: string[];\n    server?: string[];\n  };\n  result?: ChatOutput;\n};\n\n\nexport async function askAssistant(prevState: AssistantState, formData: FormData): Promise<AssistantState> {\n  const validatedFields = AssistantFormSchema.safeParse({\n    prompt: formData.get('prompt'),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: 'Missing Fields. Failed to get response.',\n    };\n  }\n  \n  const { prompt } = validatedFields.data;\n\n  try {\n    const result = await chat({\n      prompt,\n    });\n\n    if (result) {\n      return { message: 'Successfully received response.', result: result };\n    } else {\n      return { message: 'AI failed to generate a response.', errors: { server: ['No results returned.'] } };\n    }\n    \n  } catch (error) {\n    console.error('Error getting response from assistant:', error);\n    return { message: 'Server Error: Failed to get response.', errors: { server: ['An unexpected error occurred.'] } };\n  }\n}\n\nconst LoginFormSchema = z.object({\n  email: z.string().email('Please enter a valid email address.'),\n  password: z.string().min(1, 'Password is required.'),\n});\n\nexport type LoginState = {\n  message?: string | null;\n  errors?: {\n    email?: string[];\n    password?: string[];\n    server?: string[];\n  };\n  success?: boolean;\n};\n\n// Mock login action\nexport async function login(prevState: LoginState, formData: FormData): Promise<LoginState> {\n    await new Promise((resolve) => setTimeout(resolve, 500));\n\n    const email = formData.get('email') as string;\n    const password = formData.get('password') as string;\n    \n    // Simple validation - just check if fields are not empty\n    if (!email || email.trim() === '') {\n        return {\n            errors: { email: ['Email is required.'] },\n            message: 'Email is required.',\n        };\n    }\n    \n    if (!password || password.trim() === '') {\n        return {\n            errors: { password: ['Password is required.'] },\n            message: 'Password is required.',\n        };\n    }\n    \n    // Mock authentication - accept any non-empty email and password\n    return { success: true, message: \"Login successful!\" };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 716, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/agarw/OneDrive/Desktop/Timetable%20management/.next-internal/server/app/timetable/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createTimetable as '60e82e8a8d80760c4cf58115e4e077c1ab96dc6026'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 768, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/agarw/OneDrive/Desktop/Timetable%20management/src/app/timetable/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/timetable/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/timetable/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8R,GAC3T,4DACA","debugId":null}},
    {"offset": {"line": 782, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/agarw/OneDrive/Desktop/Timetable%20management/src/app/timetable/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/timetable/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/timetable/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0Q,GACvS,wCACA","debugId":null}},
    {"offset": {"line": 796, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}